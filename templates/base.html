<!DOCTYPE html>
{% load static %}
{% load lims_perms %}

<html>
    <head>
        <meta charset="UTF-8">
        <title>AHIS |</title>
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    
        <!-- Favicon -->
        <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
    
        <!-- PWA icons -->
        <link rel="manifest" href="{% static 'manifest.json' %}">
        <link rel="apple-touch-icon" sizes="192x192" href="{% static 'img/icon-192.png' %}">
        <link rel="apple-touch-icon" sizes="512x512" href="{% static 'img/icon-512.png' %}">
        <meta name="theme-color" content="#00695c">
    
        <!-- CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
        onerror="this.onerror=null;this.href='{% static 'css/bootstrap.min.css' %}';">
  
        <link href="{% static 'css/dataTables.css' %}" rel="stylesheet" type="text/css" />
         <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'css/ionicons.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'css/morris/morris.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'css/jvectormap/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'css/fullcalendar/fullcalendar.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'css/daterangepicker/daterangepicker-bs3.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'css/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'css/AdminLTE.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'select2/select2.min.css' %}" rel="stylesheet" />
    </head>
    
    
    <body class="skin-aqua">
        <header class="header bg-white shadow-sm py-2 px-4 d-flex justify-content-between align-items-center">
            <!-- Logo AHIS à gauche -->
            <div class="d-flex align-items-center">
                <a href="#" class="me-3">
                    <img src="{% static 'img/logo_ahis.png' %}" alt="AHIS Logo" style="max-height: 50px;">
                </a>
            </div>
        
            <!-- Drapeau du Niger au centre -->
            
        

{% get_static_prefix as STATIC_PREFIX %}

<div class="text-center flex-grow-1">
  <img
    src="{{ STATIC_PREFIX }}{{ country.drapeau|default:'img/default.png' }}"
    alt="Drapeau de {{ country.appellation|default:'' }}"
    style="height: 30px;"
  >
  <div class="fw-bold text-uppercase text-dark small mt-1">
    {{ country.appellation|default:'' }}
  </div>
  {# Optionnel: devise #}
  {# <div class="small text-muted">{{ country.devise|default:'' }}</div> #}
</div>

            
            <!-- Déconnexion + utilisateur à droite -->
            {% if user.is_authenticated %}
            <div class="text-end">
               <div class="small text-muted">{{ user.first_name }} {{ user.last_name }}</div>

                <a href="{% url 'logout' %}" class="btn btn-outline-danger d-flex align-items-center gap-2 mt-1">
                    <i class="fas fa-sign-out-alt"></i> <span>Se déconnecter</span>
                </a>
            </div>
            {% with user.groups.all|first as first_group %}
            {% if first_group.name == 'Administrateur Système' %}
     
            <nav class="mb-3">
  <a class="btn btn-sm btn-outline-secondary" href="/admin/">Admin</a>
       </nav>
     {% endif %}
    {% endwith %}
        </header>
       
        <div class="wrapper row-offcanvas row-offcanvas-left">
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="left-side sidebar-offcanvas">
                <!-- sidebar: style can be found in sidebar.less -->
                <section class="sidebar">
                    <!-- Sidebar user panel -->
                    <div class="user-panel">
                        <div class="pull-left image">
                           </div>
                       
                    </div>
   

          <ul class="sidebar-menu">
  

                    <!-- sidebar menu: : style can be found in sidebar.less -->
                    <ul class="sidebar-menu">
                        
                        
                        {% with user.groups.all|first as first_group %}
                        {% if first_group.name == 'Administrateur Système' or first_group.name == 'Administrateur Régional' or first_group.name == 'Administrateur Départemental' or first_group.name == 'Superviseur de Campagne' or first_group.name == 'Directeur de la Santé Animale' or first_group.name == 'Directeur Générale des services vétérinaires' %}
     
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-laptop"></i>
                                <span>Vaccinations</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                      
                                 <li><a href="#"><i class="fa fa-angle-double-right"></i> Objectifs</a></li>
                               
                                {% with user.groups.all|first as first_group %}
                                 {% if first_group.name == 'Administrateur Système' or first_group.name == 'Superviseur de Campagne' or first_group.name == 'Directeur de la Santé Animale' or first_group.name == 'Directeur Générale des services vétérinaires' %}
     
                                 <li><a href="{% url 'dotation_list' %}"><i class="fa fa-angle-double-right"></i>Dotation matériel</a></li>
                                <li><a href="{% url 'dose_list' %}"><i class="fa fa-angle-double-right"></i>Dotation vaccin</a></li>
                               {% endif %}
                               {% endwith %}
                                <li><a href="#"><i class="fa fa-angle-double-right"></i>Effectif vacciné</a></li>
                                 <li><a href="#"><i class="fa fa-angle-double-right"></i>Tableau de bord</a></li>
                               
                            </ul>
                        </li>
                        {% endif %}
                        {% endwith %}
                        
                        {% with user.groups.all|first as first_group %}
                        {% if  first_group.name == "Directeur de laboratoire" or first_group.name == 'Administrateur Système' or first_group.name == 'Administrateur Régional' or first_group.name == 'Administrateur Départemental' or first_group.name == 'Animateur de la Surveillance' or first_group.name == 'Directeur de la Santé Animale' or first_group.name == 'Directeur Générale des services vétérinaires' %}
     
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-edit"></i> <span>Surveillance</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                
                                <li><a href="#"><i class="fa fa-angle-double-right"></i>Foyers</a></li>
                                <li><a href="#"><i class="fa fa-angle-double-right"></i>Tableau de bord</a></li>
                            </ul>
                        </li>
                        {% endif %}
                        {% endwith %}

                        {% with user.groups.all|first as first_group %}
                        {% if first_group.name == 'Administrateur Système' or first_group.name == 'Animateur de la Surveillance' or first_group.name == 'Directeur de la Santé Animale' or first_group.name == 'Directeur Générale des services vétérinaires' or first_group.name == 'Superviseur de Campagne' %}
     
                        
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-table"></i> <span>Seromonitoring</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
        
                                <li><a href="{% url 'upload_excel' %}"><i class="fa fa-angle-double-right"></i>Résultats PPR</a></li>
                                <li><a href="{% url 'dashboard_sero' %}"><i class="fa fa-angle-double-right"></i>Statistiques Resultat</a></li>
                              
                                <li><a href="#"><i class="fa fa-angle-double-right"></i>Résultats PPCB</a></li>
                                <li><a href="#"><i class="fa fa-angle-double-right"></i>Cartographie des résultats</a></li>
                            </ul>
                        </li>
                        {% endif %}
                        {% endwith %}
                        {% with user.groups.all|first as first_group %}
                         {% if first_group.name != "Services vétérinaires au port" and first_group.name != "Services vétérinaires à l'aéroport" and first_group.name != "Réceptioniste" and first_group.name != "Analyste" %}

                        

                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-align-center"></i> <span>Infrastructures</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                <li>
                                    <a href="{% url 'infrastructure_list' %}">
                                        <i class="fa fa-angle-double-right"></i> Liste des infrastructures
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'inspection_list' %}">
                                        <i class="fa fa-angle-double-right"></i> Suivi des inspections
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'carte_infrastructure' %}">
                                        <i class="fa fa-angle-double-right"></i> Carte interactive
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'infrastructure_dashboard' %}">
                                        <i class="fa fa-angle-double-right"></i> Tableau de bord
                                    </a>
                                </li>
                            </ul>
                        </li>
                        {% endif %}
                        {% endwith %}

                         {% with user.groups.all|first as first_group %}
                        {% if first_group.name == 'Administrateur Système' or first_group.name == 'Santé publique' %}
     
                       <li class="treeview">
                            <a href="#">
                                <i class="fa fa-ambulance"></i> <span>Santé publique</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                            <li>  <a  href="{% url 'dashboard_sante_publique' %}">📊 Tableau de bord</a></li>
                            
                            <li><a  href="{% url 'liste_abattage' %}">📄 Registre Abattage</a></li>
                            <li> <a  href="{% url 'liste_ante_mortem' %}">👁️ Inspection ante-mortem</a></li>
                            <li> <a  href="{% url 'liste_saisies_totales' %}">❌ Saisies Totales</a></li>
                            
                            <li> <a href="{% url 'liste_saisies_organes' %}">🫀 Saisies Organes</a></li>
                             <li><a  href="{% url 'liste_inspections_viande' %}">📑 Inspection Viande</a></li>
                           
                             <li><a  href="{% url 'export_sante_excel' %}">📥 Télécharger les données</a></li>
                           
                             
                              
                            </ul>
                        </li>
                        {% endif %}
                        {% endwith %}

                       
                        {% with user.groups.all|first as first_group %}
                         {% if first_group.name != "Directeur de laboratoire" and first_group.name != "Analyste" and first_group.name != "Réceptioniste" %}
      
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-laptop"></i> <span>Actes administratifs</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            
                            <ul class="treeview-menu">
                             <li><a href="{% url 'liste_demandes' %}"><i class="fa fa-angle-double-right"></i> Suivi des demandes</a></li>
                             
                             <li><a href="{% url 'tableau_de_bord_actes' %}"><i class="fa fa-angle-double-right"></i>Tableau de bord</a></li>
                               </ul>
                        </li>
                         {% endif %}
                        {% endwith %}

                        {% with user.groups.all|first as first_group %}
                        {% if first_group.name == 'Administrateur Système' or  first_group.name == 'Gestionnaire des Médicaments' %}
     
                        
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-laptop"></i> <span>Pharm.Medecine</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                <li><a href="{% url 'dashboard_inspections' %}"><i class="fa fa-angle-right"></i>Statistiques des inspections</a></li>
                                <li><a href="{% url 'produit_list' %}"><i class="fa fa-angle-right"></i>Saisie des opérations</a></li>
                                <li><a href="{% url 'produitVet_list' %}"><i class="fa fa-angle-right"></i>Référentiel des produits</a></li>
                                <li><a href="{% url 'dashboard_produit' %}"><i class="fa fa-angle-right"></i>Statistiques des opérations</a></li>
                                <li><a href="{% url 'export_enregistrements_excel' %}"><i class="fa fa-angle-right"></i>Export des données</a></li>
                            </ul>
                        
                        
                        </li>
                        {% endif %}
                        {% endwith %}


                        {% with user.groups.all|first as first_group %}
                        {% if first_group.name == 'Administrateur Système' or first_group.name == 'Directeur de la Santé Animale' or first_group.name == 'Directeur Générale des services vétérinaires' or first_group.name == 'Superviseur de Campagne' %}
     
                         <li class="treeview">
                            <a href="#">
                                <i class="fa fa-arrow-circle-o-right"></i> <span>Mobilité animale</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                           
                            <ul class="treeview-menu">
                                <li><a href="{% url 'deplacementanimaux_list' %}"><i class="fa fa-angle-double-right"></i>Enregistrement</a></li>
                                <li><a href="{% url 'deplacementanimaux_dashbord' %}"><i class="fa fa-angle-double-right"></i>Tableau de bord</a></li>
                            </ul>
                        </li>
                        {% endif %}
                        {% endwith %}

                        {% with user.groups.all|first as first_group %}
                        {% if first_group.name == "Gestionnaire des Médicaments" or first_group.name == "Santé publique" or first_group.name == "Administrateur Système" or first_group.name == "Directeur de la Santé Animale" or  first_group.name == "Directeur Générale des services vétérinaires" or first_group.name == "Services vétérinaires à l'aéroport" %}

                        <li class="treeview">
                           <a href="#">
                               <i class="fa fa-edit"></i> <span>SV AIBD</span>
                               <i class="fa fa-angle-left pull-right"></i>
                           </a>
                           <ul class="treeview-menu">
                             <li><a href="#"><i class="fa fa-angle-double-right"></i>Rapports</a></li>
                           
                            <li><a href="{% url 'dashboard_aibd' %}"><i class="fa fa-angle-double-right"></i>Tableau de bord</a></li>
                              </ul>
                       </li>
                       {% endif %}
                       {% endwith %}


                       {% with user.groups.all|first as first_group %}
                        {% if first_group.name == "Gestionnaire des Médicaments" or first_group.name == "Santé publique" or first_group.name == 'Administrateur Système' or first_group.name == 'Directeur de la Santé Animale' or first_group.name == 'Directeur Générale des services vétérinaires' or first_group.name == 'Services vétérinaires au port' %}
     

                        <li class="treeview">
                           <a href="#">
                               <i class="fa fa-edit"></i> <span>SV au port</span>
                               <i class="fa fa-angle-left pull-right"></i>
                           </a>
                           <ul class="treeview-menu">
                             <li><a href="#"><i class="fa fa-angle-double-right"></i>Rapports</a></li>
                           
                            <li><a href="#"><i class="fa fa-angle-double-right"></i>Tableau de bord</a></li>
                              </ul>
                       </li>
                       {% endif %}
                       {% endwith %}
                      

                        {% with user.groups.all|first as first_group %}
                        {% if first_group.name == 'Administrateur Système' or  first_group.name == 'Gestionnaire des Médicaments' or  first_group.name == 'Santé publique' or first_group.name == 'Directeur de la Santé Animale' or first_group.name == 'Directeur Générale des services vétérinaires' %}
                                
                       <li class="treeview">
                            <a href="#">
                                <i class="fa fa-arrow-circle-o-right"></i> <span>Controle Facture(PIF)</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                {% with user.groups.all|first as first_group %}
                                {% if first_group.name == 'Administrateur Système'   or  first_group.name == 'Gestionnaire des Médicaments' or  first_group.name == 'Santé publique' %}
                                   
                                <li><a href="{% url 'liste_factures' %}"><i class="fa fa-angle-double-right"></i>Enregistrement des factures</a></li>
                            {% endif %}
                           {% endwith %}
                                {% with user.groups.all|first as first_group %}
                                {% if first_group.name == 'Administrateur Système' or first_group.name == 'Services vétérinaires au port' or first_group.name == "Services vétérinaires à l'aéroport"   %}
     
                                <li><a href="{% url 'liste_factures_non_controlees' %}"><i class="fa fa-angle-double-right"></i>Controle PIF</a></li>
                            {% endif %}
                           {% endwith %}
                           
                                <li><a href="{% url 'tableau_bord_pif' %}"><i class="fa fa-angle-double-right"></i>Tableau de bord</a></li>
                                
                                
                                  </ul>
                                
                        </li>  
                         {% endif %}
                           {% endwith %}
                       
                        
                         
        {% with user.groups.all|first as first_group %}
         {% if first_group.name == 'Administrateur Système' or first_group.name == 'Réceptioniste' or first_group.name == "Directeur de laboratoire" or first_group.name == "Analyste"    %}
     

        <li class="treeview">
        <a href="#">
            <i class="fa fa-ambulance"></i>  <!-- icône générale LIMS -->
            <span>Gestion des analyses </span>
            <i class="fa fa-angle-left pull-right"></i>
        </a>
        <ul class="treeview-menu">

           
            <li class="{% if request.resolver_match.url_name in 'vlims_demandes_list demande_create' %}active{% endif %}">
                <a href="{% url 'lims:vlims_demandes_list' %}">
                <i class="fa fa-inbox"></i> Reception/Analyse éch.
                </a>
            </li>

            <li class="{% if request.resolver_match.url_name in 'vlims_demandes_list demande_create' %}active{% endif %}">
                <a href="{% url 'lims:lims_dashboard' %}">
                <i class="fa fa-inbox"></i>Tableau de bord
                </a>
            </li>
            <li class="{% if request.resolver_match.url_name in 'vlims_demandes_list demande_create' %}active{% endif %}">
                <a href="{% url 'lims:rapport_periodique' %}">
                <i class="fa fa-inbox"></i>Rapport Périodique
                </a>
            </li>
           

            
        </ul>
        </li>
        {% endif %}
        {% endwith %}
                            
             
              
              <li class="treeview">
                            <a href="#">
                                <i class="fa fa-folder"></i> <span>Gestion des documents</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                <li><a href="{% url 'document_list' %}"><i class="fa fa-angle-double-right"></i>Enregistrement</a></li>
                                  </ul>
                                
                        </li> 
                        
                    </ul>
                    
                </section>
                <!-- /.sidebar -->
            </aside>

                   
                    {% endif %}
                    

                    <main class="flex-grow-1" style="margin-left: 20%;">
                        <div class="container-fluid py-4">
                          <div class="mx-auto content-scroll" style="max-width: 1140px;">
                            {% block content %}
                            {% endblock %}
                          </div>
                        </div>
                      </main>
                      

        <!-- jQuery 2.0.2 -->
         </div><!-- ./wrapper -->
       
        <script src="{% static 'js/jquery.min.js' %}"></script>
        <!-- jQuery UI 1.10.3 -->
        <script src="{% static 'js/jquery-ui-1.10.3.min.js' %}" type="text/javascript"></script>
        <!-- Bootstrap -->
        <script src="{% static 'js/bootstrap.min.js' %} " type="text/javascript"></script>
        <!-- Morris.js charts -->
        <script src="{% static 'js/raphael-min.js' %}"></script>
        <script src="js/plugins/morris/morris.min.js" type="text/javascript"></script>
       <!-- Inclure le JavaScript de Select2 -->
        <script src="{% static 'select2/select2.min.js' %}"></script>
        <!-- Sparkline -->
        <script src="{% static 'js/plugins/sparkline/jquery.sparkline.min.js' %}" type="text/javascript"></script>

        <!-- jvectormap -->
        <script src="{% static 'js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js' %}" type="text/javascript"></script>

            <!-- fullCalendar -->
            <script src="{% static 'js/plugins/fullcalendar/fullcalendar.min.js' %}" type="text/javascript"></script>

            <!-- jQuery Knob Chart -->
            <script src="{% static 'js/plugins/jqueryKnob/jquery.knob.js' %}" type="text/javascript"></script>

            <!-- daterangepicker -->
            <script src="{% static 'js/plugins/daterangepicker/daterangepicker.js' %}" type="text/javascript"></script>

            <!-- Bootstrap WYSIHTML5 -->
            <script src="{% static 'js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js' %}" type="text/javascript"></script>

            <!-- iCheck -->
            <script src="{% static 'js/plugins/iCheck/icheck.min.js' %}" type="text/javascript"></script>
             <script src="{% static 'js/bootstrap.bundle.min.js' %}" type="text/javascript"></script>

            <!-- AdminLTE App -->
            <script src="{% static 'js/AdminLTE/app.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/dataTables.js' %}"></script>
        <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
        <script src="{% static 'js/AdminLTE/dashboard.js' %}" type="text/javascript"></script>  
        <script src="{% static 'js/dataTables.js' %}" type="text/javascript"></script>
      
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var table = document.getElementById('liste_Vaccination');
                if (table) {
                    // Initialiser DataTable ici
                    new DataTable(table);
                }
            });
   
    document.addEventListener('DOMContentLoaded', function() {
        var tables = document.querySelectorAll('.data-table');
        tables.forEach(function(table) {
            new DataTable(table);
        });



        
    });
</script>
    </body>
<style>

.sidebar-menu a {
    text-decoration: none !important;
    font-weight: 500;
    font-size: 15px;
    color: #343a40;
}
.sidebar-menu a:hover {
    color: #007c91;
    background-color: #f1f1f1;
    border-radius: 4px;
    padding-left: 5px;
}
.sidebar-menu .treeview > a {
    font-weight: bold;
    font-size: 16px;
    color: #212529;
}
        .error {
    color: red;
    font-size: 0.9em;
    font-weight: bold;
}
.btn-ahis {
    background-color: #007c91; /* ton bleu canard */
    color: white;
    border: none;
}
.btn-ahis:hover {
    background-color: #005f73;
}

.kpi-card {
        border-radius: 14px;
        box-shadow: 0 0 12px rgba(0, 0, 0, 0.06);
        transition: transform 0.3s ease;
        height: 100%;
    }
.kpi-card:hover {
        transform: scale(1.03);
    }
.kpi-icon {
        font-size: 2rem;
        margin-bottom: 8px;
    }
.kpi-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.3rem;
    }
.kpi-value {
        font-size: 2.2rem;
        font-weight: bold;
    }
    
    .content-scroll {
    padding: 1rem;
    width: 100%;
    max-width: 1140px;
    margin: 0 auto;

    /* Scroll horizontal uniquement si nécessaire */
    overflow-x: auto;

    /* Scroll vertical uniquement si nécessaire */
    

    /* Ne pas forcer de hauteur inutilement */
    max-height: none;

    /* Amélioration responsive sur grands écrans */
    box-sizing: border-box;
}




    </style>
    
    
</html>