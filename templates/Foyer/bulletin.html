{% extends '../base.html' %}
{% load static %}
{% load form_tags %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Génération de rapport zoosanitaire</h2>
    {% if error_message %}
    <div class="alert alert-danger">{{ error_message }}</div>
    {% endif %}
 
    <form method="post" class="needs-validation mt-3" novalidate>
        {% csrf_token %}
        <div class="row g-3 align-items-end">
    
            <!-- Type de période -->
            <div class="col-md-3">
                <label for="{{ form.periode_type.id_for_label }}" class="form-label">
                    {{ form.periode_type.label }}
                </label>
                {{ form.periode_type|add_class:"form-select" }}
            </div>
    
            <!-- Sélecteur selon le type -->
            <div class="col-md-2" id="hebdomadaire-group" style="display: none;">
                <label for="{{ form.semaine.id_for_label }}" class="form-label">
                    {{ form.semaine.label }}
                </label>
                {{ form.semaine|add_class:"form-select" }}
            </div>
    
            <div class="col-md-2" id="mensuel-group" style="display: none;">
                <label for="{{ form.mois.id_for_label }}" class="form-label">
                    {{ form.mois.label }}
                </label>
                {{ form.mois|add_class:"form-select" }}
            </div>
    
            <div class="col-md-2" id="trimestriel-group" style="display: none;">
                <label for="{{ form.trimestre.id_for_label }}" class="form-label">
                    {{ form.trimestre.label }}
                </label>
                {{ form.trimestre|add_class:"form-select" }}
            </div>
    
            <div class="col-md-2" id="semestriel-group" style="display: none;">
                <label for="{{ form.semestre.id_for_label }}" class="form-label">
                    {{ form.semestre.label }}
                </label>
                {{ form.semestre|add_class:"form-select" }}
            </div>
    
            <div class="col-md-2" id="annee-group">
                <label for="{{ form.annee.id_for_label }}" class="form-label">
                    {{ form.annee.label }}
                </label>
                {{ form.annee|add_class:"form-select" }}
            </div>
    
            <!-- Bouton -->
            <div class="col-md-2 d-grid">
                <button type="submit" class="btn btn-success mt-4">
                    <i class="fa fa-file-alt me-1"></i> Générer
                </button>
            </div>
    
        </div>
    </form>
    
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const periodeType = document.querySelector('#id_periode_type'); // Remplacez 'id_periode_type' par l'ID de votre champ
        const hebdomadaireGroup = document.getElementById('hebdomadaire-group');
        const mensuelGroup = document.getElementById('mensuel-group');
        const trimestrielGroup = document.getElementById('trimestriel-group');
        const semestrielGroup = document.getElementById('semestriel-group');

        // Fonction pour afficher/masquer les groupes de champs
        function toggleFields() {
            const selectedValue = periodeType.value;

            // Masquer tous les groupes de champs par défaut
            hebdomadaireGroup.style.display = 'none';
            mensuelGroup.style.display = 'none';
            trimestrielGroup.style.display = 'none';
            semestrielGroup.style.display = 'none';

            // Afficher le groupe correspondant à la sélection
            if (selectedValue == 'Mensuel') {
                mensuelGroup.style.display = 'block';
            } else if (selectedValue == 'Hebdomadaire') {
                hebdomadaireGroup.style.display = 'block';
            } else if (selectedValue == 'Trimestriel') {
                trimestrielGroup.style.display = 'block';
            } else if (selectedValue == 'Semestriel') {
                semestrielGroup.style.display = 'block';
            }
        }

        // Appeler la fonction au  chargement de la page
        toggleFields();

        // Écouter les changements sur le champ de sélection
        periodeType.addEventListener('change', toggleFields);
    });
</script>
{% endblock %}
